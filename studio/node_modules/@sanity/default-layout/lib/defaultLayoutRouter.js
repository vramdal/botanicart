'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _router = require('part:@sanity/base/router');

var _tool = require('all:part:@sanity/base/tool');

var _tool2 = _interopRequireDefault(_tool);

var _spaces = require('./util/spaces');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const toolRoute = (0, _router.route)('/:tool', toolParams => {
  const foundTool = _tool2.default.find(current => current.name === toolParams.tool);
  return foundTool ? _router.route.scope(foundTool.name, '/', foundTool.router) : (0, _router.route)('/');
});

const spaceRoute = (0, _router.route)('/:space', params => {
  const foundSpace = _spaces.CONFIGURED_SPACES.find(sp => sp.name === params.space);
  return foundSpace ? toolRoute : (0, _router.route)('/');
});

exports.default = (0, _router.route)('/', [_router.route.intents('/intent'), _spaces.HAS_SPACES ? spaceRoute : toolRoute]);